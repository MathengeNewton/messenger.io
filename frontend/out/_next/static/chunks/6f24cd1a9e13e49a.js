(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2381,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(4581),n=e.i(70319);let r={general:"General",event:"Event",prayer:"Prayer",ministry:"Ministry"},i={low:"Low",medium:"Medium",high:"High"},l=({formData:e,editingAnnouncement:s,onChange:a,onSubmit:n,onClose:l})=>{let c="event"===e.type||"ministry"===e.type;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:s?"Edit Announcement":"Create Announcement"}),(0,t.jsxs)("form",{onSubmit:n,children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),(0,t.jsx)("input",{type:"text",name:"title",value:e.title,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,t.jsx)("select",{name:"type",value:e.type,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",required:!0,children:Object.entries(r).map(([e,s])=>(0,t.jsx)("option",{value:e,children:s},e))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority *"}),(0,t.jsx)("select",{name:"priority",value:e.priority,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",required:!0,children:Object.entries(i).map(([e,s])=>(0,t.jsx)("option",{value:e,children:s},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expires At"}),(0,t.jsx)("input",{type:"date",name:"expiresAt",value:e.expiresAt,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),(0,t.jsx)("textarea",{name:"content",value:e.content,onChange:a,rows:"6",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",required:!0})]}),c&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 rounded-md",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Event Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Date"}),(0,t.jsx)("input",{type:"datetime-local",name:"metadata.eventDate",value:e.metadata.eventDate,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,t.jsx)("input",{type:"text",name:"metadata.location",value:e.metadata.location,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,t.jsx)("input",{type:"text",name:"metadata.contactPerson",value:e.metadata.contactPerson,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),(0,t.jsx)("input",{type:"tel",name:"metadata.contactPhone",value:e.metadata.contactPhone,onChange:a,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image URL"}),(0,t.jsx)("input",{type:"url",name:"metadata.imageUrl",value:e.metadata.imageUrl,onChange:a,placeholder:"https://example.com/image.jpg",className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"})]})]}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("label",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"isMobileAppVisible",checked:e.isMobileAppVisible,onChange:a,className:"mr-2"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Make visible in mobile app"})]})}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 border rounded-md hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-900 text-white px-4 py-2 rounded-md hover:bg-[#1e88b5]",children:"Save"})]})]})]})})},c=({announcement:e,onClose:s})=>(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold mb-2",children:e.title}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded capitalize",children:e.type}),(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:i[e.priority]}),e.isMobileAppVisible&&(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"Mobile App"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[e.publishedAt&&(0,t.jsxs)("p",{children:["Published:"," ",new Date(e.publishedAt).toLocaleString()]}),e.expiresAt&&(0,t.jsxs)("p",{children:["Expires: ",new Date(e.expiresAt).toLocaleString()]})]})]}),(0,t.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.metadata?.imageUrl&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("img",{src:e.metadata.imageUrl,alt:e.title,className:"w-full h-64 object-cover rounded-md"})}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("div",{className:"text-gray-700 whitespace-pre-wrap",children:e.content})}),e.metadata&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-md",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Event Details"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[e.metadata.eventDate&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Event Date:"})," ",new Date(e.metadata.eventDate).toLocaleString()]}),e.metadata.location&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Location:"})," ",e.metadata.location]}),e.metadata.contactPerson&&(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Contact:"})," ",e.metadata.contactPerson,e.metadata.contactPhone&&` - ${e.metadata.contactPhone}`]})]})]}),(0,t.jsx)("div",{className:"flex justify-end mt-6",children:(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",children:"Close"})})]})});e.s(["default",0,()=>{let[e,o]=(0,s.useState)([]),[d,m]=(0,s.useState)(!0),[x,p]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[y,j]=(0,s.useState)(null),[f,v]=(0,s.useState)({search:"",type:"",priority:"",active:"",mobileAppVisible:""}),[N,w]=(0,s.useState)({title:"",content:"",type:"general",priority:"medium",expiresAt:"",isMobileAppVisible:!1,metadata:{imageUrl:"",eventDate:"",location:"",contactPerson:"",contactPhone:""}});(0,s.useEffect)(()=>{A()},[f]);let A=async()=>{try{m(!0);let e={};f.search&&(e.search=f.search),f.type&&(e.type=f.type),f.priority&&(e.priority=f.priority),""!==f.active&&(e.isActive="true"===f.active),""!==f.mobileAppVisible&&(e.isMobileAppVisible="true"===f.mobileAppVisible);let t=await a.apiClient.announcements.getAll(e);o(t.data||[])}catch(e){console.error("Error loading announcements:",e),n.toast.error("Failed to load announcements")}finally{m(!1)}},C=async e=>{if(confirm("Are you sure you want to delete this announcement?"))try{await a.apiClient.announcements.delete(e),n.toast.success("Announcement deleted successfully"),A()}catch(e){console.error("Error deleting announcement:",e),n.toast.error("Failed to delete announcement")}},k=async e=>{try{await a.apiClient.announcements.publish(e),n.toast.success("Announcement published successfully"),A()}catch(e){console.error("Error publishing announcement:",e),n.toast.error("Failed to publish announcement")}},P=async e=>{try{await a.apiClient.announcements.expire(e),n.toast.success("Announcement expired successfully"),A()}catch(e){console.error("Error expiring announcement:",e),n.toast.error("Failed to expire announcement")}},D=async e=>{if(e.preventDefault(),!N.title||!N.content)return void n.toast.error("Title and content are required");try{let e={...N,expiresAt:N.expiresAt||null,metadata:Object.keys(N.metadata).some(e=>N.metadata[e])?N.metadata:null};b?(await a.apiClient.announcements.update(b.id,e),n.toast.success("Announcement updated successfully")):(await a.apiClient.announcements.create(e),n.toast.success("Announcement created successfully")),p(!1),A()}catch(e){console.error("Error saving announcement:",e),n.toast.error(e.response?.data?.message||"Failed to save announcement")}},S=e=>{v({...f,[e.target.name]:e.target.value})},E=e=>!!e.expiresAt&&new Date(e.expiresAt)<new Date;return d?(0,t.jsx)("div",{className:"w-full space-y-8 bg-gray-50 min-h-screen p-6 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-gray-600",children:"Loading announcements..."})}):(0,t.jsxs)("div",{className:"w-full space-y-8 bg-gray-50 min-h-screen p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Announcements Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage church announcements for web and mobile app"})]}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsx)("input",{type:"text",name:"search",value:f.search,onChange:S,placeholder:"Search by title...",className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent"}),(0,t.jsxs)("select",{name:"type",value:f.type,onChange:S,className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Types"}),Object.entries(r).map(([e,s])=>(0,t.jsx)("option",{value:e,children:s},e))]}),(0,t.jsxs)("select",{name:"priority",value:f.priority,onChange:S,className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Priorities"}),Object.entries(i).map(([e,s])=>(0,t.jsx)("option",{value:e,children:s},e))]}),(0,t.jsxs)("select",{name:"active",value:f.active,onChange:S,className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"true",children:"Active"}),(0,t.jsx)("option",{value:"false",children:"Inactive/Expired"})]}),(0,t.jsxs)("select",{name:"mobileAppVisible",value:f.mobileAppVisible,onChange:S,className:"px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-900 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Visibility"}),(0,t.jsx)("option",{value:"true",children:"Mobile App Visible"}),(0,t.jsx)("option",{value:"false",children:"Not Mobile Visible"})]})]})}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Announcements List"}),(0,t.jsx)("button",{onClick:()=>{g(null),w({title:"",content:"",type:"general",priority:"medium",expiresAt:"",isMobileAppVisible:!1,metadata:{imageUrl:"",eventDate:"",location:"",contactPerson:"",contactPhone:""}}),p(!0)},className:"bg-blue-900 text-white px-4 py-2 rounded-md hover:bg-[#1e88b5] transition-colors",children:"Create Announcement"})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Published"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expires"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"No announcements found."})}):e.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.title}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded capitalize",children:e.type})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:i[e.priority]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString():"—"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.expiresAt?new Date(e.expiresAt).toLocaleDateString():"Never"}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isActive&&!E(e)?(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:E(e)?"Expired":"Inactive"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isMobileAppVisible?(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:"✓"}):(0,t.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{j(e),h(!0)},className:"text-blue-600 hover:text-blue-900",children:"View"}),(0,t.jsx)("button",{onClick:()=>{g(e),w({title:e.title||"",content:e.content||"",type:e.type||"general",priority:e.priority||"medium",expiresAt:e.expiresAt?e.expiresAt.split("T")[0]:"",isMobileAppVisible:e.isMobileAppVisible||!1,metadata:e.metadata||{imageUrl:"",eventDate:"",location:"",contactPerson:"",contactPhone:""}}),p(!0)},className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),e.publishedAt?(0,t.jsx)("button",{onClick:()=>P(e.id),className:"text-yellow-600 hover:text-yellow-900",children:"Expire"}):(0,t.jsx)("button",{onClick:()=>k(e.id),className:"text-green-600 hover:text-green-900",children:"Publish"}),(0,t.jsx)("button",{onClick:()=>C(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})]}),x&&(0,t.jsx)(l,{formData:N,editingAnnouncement:b,onChange:e=>{let{name:t,value:s,type:a,checked:n}=e.target;if(t.startsWith("metadata.")){let e=t.split(".")[1];w({...N,metadata:{...N.metadata,[e]:s}})}else w({...N,[t]:"checkbox"===a?n:s})},onSubmit:D,onClose:()=>p(!1)}),u&&y&&(0,t.jsx)(c,{announcement:y,onClose:()=>{h(!1),j(null)}})]})}])}]);